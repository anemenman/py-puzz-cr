import time

from numpy import matrix


def fib(n):
    return (matrix('0 1; 1 1' if n >= 0 else '-1 1; 1 0', object) ** abs(n))[0, 1]


start = time.time()
assert fib(0) == 0
assert fib(1) == 1
assert fib(2) == 1
assert fib(3) == 2
assert fib(4) == 3
assert fib(5) == 5

assert fib(-1) == 1
assert fib(-6) == -8
assert fib(-96) == -51680708854858323072
assert fib(-96) == -51680708854858323072
assert fib(
    -500) == -139423224561697880139724382870407283950070256587697307264108962948325571622863290691557658876222521294125
assert fib(
    1000) == 43466557686937456435688527675040625802564660517371780402481729089536555417949051890403879840079255169295922593080322634775209689623239873322471161642996440906533187938298969649928516003704476137795166849228875

print(time.time() - start)
